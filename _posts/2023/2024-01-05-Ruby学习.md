---
title: Ruby å­¦ä¹ ï¼ˆä¸€ï¼‰
tags: Ruby Cocoapods
published: true
article_header:
    type: cover 
    image:
        src: https://cdn.pixabay.com/photo/2017/01/18/16/46/hong-kong-1990268_1280.jpg

---

## Ruby å­¦ä¹ ï¼ˆä¸€ï¼‰

### å‰å› 

ä¸ºä»€ä¹ˆè¦å­¦ä¹ Rubyï¼Ÿæˆ‘ä»¬éƒ½çŸ¥é“iOS å¼ºå¤§çš„åŒ…ç®¡ç†å·¥å…·Cocoapodsï¼ŒCocoapodsæ­£æ˜¯ä½¿ç”¨Rubyè¿›è¡Œç¼–å†™ï¼Œé‚£ä¹ˆæƒ³è¦äº†è§£Cocoapodså†…éƒ¨çš„å®ç°åŸç†ï¼Œä»¥åŠä»–æ¶æ„æ–¹å¼ï¼Œæƒ³å¿…æˆ‘ä»¬å¿…é¡»è¦å­¦ä¹ ä»–æ‰€ä½¿ç”¨çš„è¯­è¨€---å³rubyã€‚

### åˆè¯†

#### Ruby èƒŒæ™¯

Ruby è¿™é—¨è¯­è¨€å‘¢æ˜¯ç”±æ—¥æœ¬äºº*æ¾æœ¬è¡Œå¼˜* åœ¨20ä¸–çºª90å¹´ä»£è®¾è®¡å¹¶å¼€å‘çš„ä¸€ç§è¯­è¨€ã€‚é‚£ä¹ˆRubyå‘¢ï¼Œå…¶å®æ˜¯ä¸€ä¸­å®Œå…¨é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œåœ¨Ruby é‡Œä¹Ÿæ˜¯ä¸‡ç‰©çš†å¯¹è±¡ã€‚å½“ç„¶Ruby å’Œ Pythonã€JavaScriptç­‰è„šæœ¬è¯­è¨€ä¸€æ ·ï¼Œå®ƒæ˜¯ä¸€ç§éœ€è¦è§£é‡Šçš„è¯­è¨€ï¼ˆä¹Ÿå°±æ˜¯è¯´å®ƒä¸éœ€è¦è¿›è¡Œç¼–è¯‘ã€é“¾æ¥å½¢æˆå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè€Œæ˜¯éœ€è¦ä¸€ä¸ªè§£é‡Šå™¨å»è§£é‡Šæ‰§è¡Œï¼‰ã€‚æ®è¯´ç«èµ·æ¥å…¶å®åœ¨2000å¹´ä»¥åäº†ï¼ˆè¿™ä¸ªæˆ‘å°±ä¸çŸ¥é“äº†....ï¼‰

#### Ruby å®‰è£…

*MacOS ä¼šå†…ç½®Rubyï¼Œ é»˜è®¤Rubyä¸€èˆ¬ç‰ˆæœ¬è¾ƒä½ï¼Œä¸”ä¸å¥½å‡çº§*

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬Linux ã€MacOs ä¼šé‡‡ç”¨ä¸‰ç§æ–¹å¼å®‰è£…Rubyï¼š

* é‡‡ç”¨homebrewå®‰è£…Rubyï¼Œ``` brew install ruby ```, é…ç½®ç¯å¢ƒå˜é‡ ``` echo 'export PATH="/usr/local/opt/ruby/bin:$PATH"' >> ~/.zshrc, ä½†æ˜¯è¿™æ˜¯å±äºè‡ªç®¡ç†rubyç‰ˆæœ¬çš„æ–¹å¼ï¼Œä¸æ¨èä½¿ç”¨

* é‡‡ç”¨ RVMå®‰è£…ï¼Œ RVMä¹Ÿå°±æ˜¯Ruby Version Managerçš„é¦–å­—æ¯ã€‚å¯æƒ³è€ŒçŸ¥ä»–å°±æ˜¯Ruby ç‰ˆæœ¬ç®¡ç†å™¨ã€‚

  * é¦–å…ˆéœ€è¦å®‰è£…RVM:  ``` curl -sSL https://get.rvm.io | bash -s stable --auto-dotfiles ``` ï¼Œ--auto-dotfiles å…¶å®å°±æ˜¯åœ¨å®‰è£…rvmçš„æ—¶å€™ï¼Œä»–ä¼šä¸»åŠ¨å°†ç¯å¢ƒå˜é‡é…ç½®å¥½ï¼Œä¸ç”¨æˆ‘ä»¬è‡ªå·±åœ¨æ‰“å¼€.bashrc/.zshrc é…ç½®äº†ã€‚

  * é‡å¯ç»ˆç«¯ | source ~/.zshrcï¼Œ è¾“å…¥å‘½ä»¤ ``` rvm --verison ```, è¾“å‡ºæ­£å¸¸ç‰ˆæœ¬å·åˆ™å®‰è£…rvmæˆåŠŸ

  * ``` rvm list known``` åˆ—å‡ºå·²çŸ¥çš„æ‰€æœ‰Rubyç‰ˆæœ¬

  * ``` rvm install 3.1.2  ``` å®‰è£…åˆ¶å®šruby ç‰ˆæœ¬

    * å¯èƒ½ä¼šå‡ºç°ä¸€ä¸ªä»¥ä¸‹é”™è¯¯ ï¼š

      ```shell
      Error running '__rvm_make -j12',
      please read /Users/haoyh02/.rvm/log/1704359555_ruby-3.1.2/make.log
      There has been an error while running make. Halting the installation.
      ```

      é€šè¿‡æŸ¥çœ‹make.logï¼Œæˆ‘ä»¬å‘ç°æŠ¥é”™æ˜¯å‘ç”Ÿåœ¨openssl@3ï¼Œå¤§æ¦‚åŸå› åº”è¯¥å°±æ˜¯å®‰è£…Rubyçš„æ—¶å€™éœ€è¦ç¼–è¯‘ç”¨åˆ°openssl, å½“æˆ‘ä»¬æ²¡æœ‰æŒ‡å®šopensslè·¯å¾„çš„æƒ…å†µä¸‹ï¼Œå®ƒå°±ä¼šé»˜è®¤åˆ°/usr/local/Cellar/ ä¸‹çš„opensslä½¿ç”¨ï¼Œä½†æ˜¯æ­£å¸¸æˆ‘ä»¬ä½¿ç”¨brew æ›´æ–°æˆ–è€…å®‰è£…è¿‡opensslçš„è¯è·¯å¾„å¹¶ä¸åœ¨è¿™é‡Œï¼Œåº”è¯¥åœ¨/usr/local/opt/openssl@3 è¿™é‡Œã€‚è¿™ä¹Ÿå°±æ˜¯å¯¼è‡´ç¼–è¯‘çš„æ—¶å€™opensslçš„æŸäº›æ–¹æ³•æ‰¾ä¸åˆ°ç­‰ç­‰é”™è¯¯

    * è§£å†³ç‰ˆæœ¬åˆ™æ˜¯ï¼šä½¿ç”¨å‘½ä»¤ ``` rvm install 3.1.2 --with-openssl-dir=`brew --prefix openssl` |  rvm install 3.1.2 --with-openssl-dir='/usr/local/opt/openssl@3' ```

      :) è¿™ä¸ªé—®é¢˜ä¹Ÿæ˜¯è®©æˆ‘å¾ˆé•¿æ—¶é—´æ‰¾ä¸åˆ°é—®é¢˜çš„åŸå› ã€‚

  * å®‰è£…RubyæˆåŠŸåï¼Œ ä½¿ç”¨```rvm use 3.1.2 --default```ï¼Œ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨rvm use å…¶ä»–ç‰ˆæœ¬åˆ‡æ¢ruby ç‰ˆæœ¬

  * ```ruby  --verison ``` æŸ¥çœ‹ç‰ˆæœ¬æ˜¯å¦æ˜¯æˆ‘ä»¬å®‰è£…çš„ç‰ˆæœ¬

* é‡‡ç”¨rbenv å®‰è£…ï¼Œrbenv æ˜¯Ruby environment çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯Ruby ç¯å¢ƒï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªRuby ç‰ˆæœ¬ç®¡ç†å™¨ã€‚

  * å®‰è£…rbenv : ``` brew install rbenv ruby-build```, å½“ç„¶ä¹Ÿå¯ä»¥é‡‡ç”¨éhome brew æ‰‹åŠ¨å®‰è£…ï¼šhttps://ruby-china.org/wiki/rbenv-guide, æ‰‹åŠ¨å®‰è£…å°±ä¸èµ˜è¿°äº†ï¼Œéº»çƒ¦ä¸€äº›ã€‚
  * å®‰è£…å®Œæˆåï¼Œ ``` rbenv install --list ``` åˆ—å‡ºå¯å®‰è£…çš„Ruby ç‰ˆæœ¬
  * ``` rbenv install 3.1.2``` å®‰è£…åˆ¶å®šruby ç‰ˆæœ¬
  * ``` rbenv global 3.1.2 ``` å…¨å±€ä½¿ç”¨3.1.2çš„rubyï¼Œ ç±»ä¼¼äºrvm use

é‚£ä¸ç¦å°±æƒ³é—®ï¼šé‚£è¿™ä¸‰ç§æ–¹å¼çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬åº”è¯¥ç”¨å“ªä¸€ç§ï¼Ÿ

é‚£ä¹ˆå¯¹äºhomebrew çš„æ–¹å¼ï¼ˆä¹Ÿå°±æ˜¯ç¬¬ä¸€ç§æ–¹å¼ï¼‰ï¼Œåªèƒ½å®‰è£…ä¸€ä¸ªç‰ˆæœ¬çš„rubyï¼Œå¦‚æœä½ å¤šrubyå¼€å‘ï¼Œé‚£ä¹ˆè¿™ç§æ–¹å¼ä¸åˆé€‚äº†ï¼Œå› ä¸ºå®ƒå¹¶ä¸æ˜¯ruby ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œå¯¹å§ï¼Ÿ

å…¶ä»–ä¸¤ç§æ¥è¯´ï¼Œæˆ‘ä¹ŸæŸ¥é˜…äº†ä¸€äº›èµ„æ–™ï¼Œæ€»ä½“æ¥è¯´rvmå‡ºæ¥çš„æ›´æ—©ï¼ŒåŠŸèƒ½æ›´å…¨ï¼Œä½†æ˜¯rbenvä¹Ÿå¾ˆå¥½ã€‚æ¢è¨€ä¹‹å°±æ˜¯ç”¨è°éƒ½è¡Œï¼Œåªè¦ä½ è§‰å¾—å¥½å°±å¥½~

æ‰€ä»¥æ¨èæ¥è¯´çš„è¯ï¼Œè¿˜æ˜¯ä½¿ç”¨rvmæˆ–è€…rbenvè¿›è¡Œrubyå®‰è£…ä»¥åŠç‰ˆæœ¬ç®¡ç†~

**å¯¹äºWindowsçš„å®‰è£…è¯·æŸ¥é˜…æ–‡æ¡£ï¼šhttps://rubyinstaller.cn/ ï¼ˆå› ä¸ºæˆ‘æ˜¯Macï¼Œ æ²¡æœ‰Windowsï¼Œæ²¡æœ‰å°è¯•ï¼Œæ‰€ä»¥æ²¡æœ‰å‘è¨€æƒğŸ˜­ï¼‰**

okï¼Œç°åœ¨æ¥è¯´æˆ‘ä»¬å·²ç»æ‹¥æœ‰åŸºæœ¬çš„å¼€å‘rubyçš„æ¡ä»¶ã€‚

### ç›¸å…³æ¦‚å¿µ

å¯¹äºæˆ‘åˆšå¼€å§‹å­¦ä¹ çš„æ—¶å€™ï¼Œè¿™å‡ ä¸ªæ¦‚å¿µä¹Ÿæ˜¯å¯¹æˆ‘é€ æˆäº†ä¸€å®šçš„å›°æ‰°ï¼Œå¹¶ä¸”æˆ‘ä»¬è¦çŸ¥é“ä»¥ä¸‹å‡ ä¸ªä¸œè¥¿ä¼šä¸€ç›´é™ªåœ¨æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­çš„ã€‚æ‰€ä»¥å¯¹äºä»–ä»¬çš„äº†è§£ï¼Œå¯æƒ³è€ŒçŸ¥å¤šé‡è¦~

#### IRb 

å¯äº¤äº’å¼Ruby shellï¼Œ ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯è¿›è¡Œç”¨IRb å‘½ä»¤è§£é‡ŠRuby ä»£ç ï¼Œä¸¾ä¸ªæ —å­ï¼š

```
% IRb                       
A gemspec development dependency (bacon, ~> 1.1) is being overridden by a Gemfile dependency (bacon, >= 0).
This behaviour may change in the future. Please remove either of them, or make sure they both have the same requirement
3.2.1 :001 > puts "hello world"
hello world
 => nil 
3.2.1 :002 > 
```

å¦‚ä¸Šï¼Œæˆ‘ä»¬åœ¨å‘½ä»¤è¡Œè¾“å…¥IRbåå›è½¦ï¼Œå°±ä¼šè¿›å…¥åˆ°å¯äº¤äº’shell ç¼–ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å»ç¼–å†™rubyï¼Œç„¶åå•è¡Œè§£é‡Šã€‚

#### Gem

Gem ç›¸å½“äºæ˜¯ç”¨Ruby å†™çš„ä¸‰æ–¹Gem åº“çš„ç®¡ç†ï¼Œé€šè¿‡Gem æˆ‘ä»¬å¯ä»¥å®‰è£…æ‰€æœ‰ç°æœ‰çš„ä¸‰æ–¹gemåº“ã€‚å…¶å®ä¸‰æ–¹gem åŒ…ç®¡ç†å™¨ã€‚é€šè¿‡gem å¯ä»¥è¿›è¡Œå®‰è£…gem åŒ…ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡gem list --local æŸ¥çœ‹æœ¬åœ°å®‰è£…äº†çš„gem åŒ…ã€‚å…¶å®æˆ‘ä»¬å›æƒ³ä¸€ä¸‹cocoapodsçš„å®‰è£…ï¼Œgem install cocoapods å¯¹å§ï¼Ÿæ‰€ä»¥å…¶å®æˆ‘ä»¬çš„cocoapodsä»–å°±æ˜¯ä¸€ä¸ªgem åŒ…ã€‚

#### Bundler

è¯´åˆ°bundler é‚£å°±ä¸å¾—ä¸æï¼Œå¦å¤–çš„ä¸¤ä¸ªå·¥ç¨‹é‡Œçš„æ–‡ä»¶ï¼š

##### Gemfile

##### Gemfile.lock

çœ‹ç€è¿™ä¸¤ä¸ªæ˜¯å¦æœ‰ç‚¹æ„Ÿè§‰å¥½ç†Ÿæ‚‰çš„æ ·å­ï¼Ÿæƒ³ä¸€æƒ³æˆ‘ä»¬iOSå·¥ç¨‹é‡‡ç”¨Cocoapodsç®¡ç†çš„æ—¶å€™æ˜¯å¦æœ‰ç±»ä¼¼çš„æ–‡ä»¶ï¼Ÿ

æ˜¯çš„ï¼Œæˆ‘ä»¬iOS å·¥ç¨‹å¦‚æœé‡‡ç”¨Cocoapodsç®¡ç†çš„è¯ï¼Œæˆ‘ä»¬ä¼šæœ‰Podfileå’ŒPodfile.lockã€‚ å¦‚æœä½ å¯¹è¿™ä¸¤ä¸ªæ–‡ä»¶äº†è§£çš„è¯ï¼Œé‚£å…¶å®Gemfile Gemfile.lock ä¹Ÿæ˜¯åŒæ ·çš„åŠŸèƒ½ï¼Œå› ä¸ºCocoapodsçš„è®¾è®¡å°±æ˜¯ä»Gemçš„è®¾è®¡å€Ÿé‰´è€Œæ¥çš„ã€‚

å¥½äº†ï¼Œæˆ‘ä»¬è¿˜æ˜¯è§£é‡Šä¸€ä¸‹è¿™ä¸¤ä¸ªæ–‡ä»¶çš„ä½œç”¨å§

Gemfileï¼š åŒæ ·æ˜¯ç”¨æ¥æè¿°å½“å‰åŒ…ä¾èµ–çš„ä¸‰æ–¹gemåŒ…çš„ï¼Œå¦‚ä¸‹ï¼š

```ruby
SKIP_UNRELEASED_VERSIONS = false
def cp_gem(name, repo_name, branch = 'master', path: false)
  return gem name if SKIP_UNRELEASED_VERSIONS
  opts = if path
           { :path => "../#{repo_name}" }
         else
           url = "https://github.com/CocoaPods/#{repo_name}.git"
           { :git => url, :branch => branch }
         end
  gem name, opts
end

source 'https://rubygems.org'

gemspec

group :development do
  cp_gem 'claide',                'CLAide'
  cp_gem 'cocoapods-core',        'Core'
  cp_gem 'cocoapods-deintegrate', 'cocoapods-deintegrate'
  cp_gem 'cocoapods-downloader',  'cocoapods-downloader'
end
```

Gemfile.lockï¼š å¦‚åŒå®ƒçš„ç±»å‹åä¸€æ ·ï¼Œä»–æ˜¯ç”¨æ¥é”å®šçš„ï¼Œé”å®šä»€ä¹ˆï¼Ÿé”å®šä½ æ‰€ä¾èµ–çš„ä¸‰æ–¹gemåŒ…çš„ç‰ˆæœ¬çš„ã€‚åŒæ ·å’ŒPodfile.lockä¸€æ ·é˜²æ­¢å¤šäººå¼€å‘åä½œï¼Œç‰ˆæœ¬ä¸ä¸€è‡´çš„é—®é¢˜ã€‚

OKï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥è¯´ä¸€è¯´å®ƒä¸Bundlerçš„å…³ç³»ï¼š

å…¶å®Bundler å’Œ æˆ‘ä»¬Pod å‘½ä»¤å¾ˆç›¸ä¼¼ï¼Œåœ¨å½“å‰æ ¹ç›®å½•ä¸‹æ‰§è¡Œbundler installï¼Œ å®ƒä¼šè¿›è¡Œä¾èµ–è§£æã€å®‰è£…ä¾èµ–ã€‚è¿™æ˜¯ä¸æ˜¯å°±å’Œæˆ‘ä»¬pod install ä¸€æ ·å‘¢ï¼Ÿ

é‚£ä¹ˆè¿™ä¹ˆçœ‹å‘¢ï¼Ÿbundler å…¶å®ç”¨æ¥å·¥ç¨‹ä¾èµ–è§£æã€å®‰è£…è£…çš„ï¼Œå…¶å®å…·ä½“çš„å®‰è£…æ˜¯é€šè¿‡gemå®‰è£…çš„ã€‚

è¿™æ ·ä»–ä»¬ä¹‹é—´çš„å…³ç³»æ˜¯ä¸æ˜¯æ›´åŠ æ¸…æ™°äº†~

#### Rake

å½“æˆ‘ç¬¬ä¸€çœ¼çœ‹åˆ°è¿™ä¸ªå•è¯ï¼Œæˆ‘å°±æƒ³åˆ°äº†Makeï¼Œä½†äº‹å®ä¸Šä»–å¹¶ä¸æ˜¯ä¸€ä¸ªå•è¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»„åˆï¼šRuby Makeã€‚

æˆ‘ä»¬åœ¨å·¥ç¨‹é‡Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªæ–‡ä»¶å«Rakefileã€‚é‚£ä¹ˆå…¶å®ä»–ä»¬æ˜¯ç›¸å…³è”çš„ã€‚

åˆšæ‰æˆ‘ä»¬æåˆ°äº†Makeï¼Œè¿™ä¸ªå¯ä¸æ˜¯ä»…ä»…æ˜¯ä¸€ä¸ªè¯å•Šï¼Œæˆ‘æƒ³åˆ°çš„æ˜¯Cè¯­è¨€çš„æ„å»ºå·¥å…·Makeï¼Œ åŒæ ·ä»–ä¹Ÿæœ‰å¯¹åº”çš„æ–‡ä»¶makefileã€‚

ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥åœ¨Rakefile å®šä¹‰ä¸€äº›åˆ—çš„ä»»åŠ¡ï¼Œç›¸å½“äºä»»åŠ¡è„šæœ¬ï¼Œæ‰§è¡Œrake å‘½ä»¤å°±å¯ä»¥æ‰§è¡Œä»»åŠ¡ã€‚

æ¯”å¦‚CocoaPodså·¥ç¨‹ä¸‹çš„Rakefileä¸ºï¼š

```
# Bootstrap task
#-----------------------------------------------------------------------------#

desc 'Initializes your working copy to run the specs'
task :bootstrap, :use_bundle_dir? do |_, args|
  title 'Environment bootstrap'

  puts 'Updating submodules'
  execute_command 'git submodule update --init --recursive'

  if system('which bundle')
    puts 'Installing gems'
    if args[:use_bundle_dir?]
      execute_command 'env bundle install --path ./travis_bundle_dir'
    else
      execute_command 'env bundle install'
    end
  else
    $stderr.puts "\033[0;31m" \
      "[!] Please install the bundler gem manually:\n" \
      '    $ [sudo] gem install bundler' \
      "\e[0m"
    exit 1
  end
end
....
```

### å¼€å‘ç¯å¢ƒ

å¼€å‘ç¯å¢ƒå¯ä»¥è¯´æ˜¯æˆ‘æçš„æ—¶é—´æœ€é•¿çš„ä¸€ä¸ªä¸œè¥¿äº†ã€‚ä½ çŸ¥é“å¦‚æœä½ ç”¨VSCode æ‰“å¼€ä¸€ä¸ªGemé¡¹ç›®ï¼Œå®ƒçš„æ‰€æœ‰ä¾èµ–ã€ç±»çš„å¿«é€Ÿè·³è½¬ã€è§£é‡Šéƒ½æ²¡æœ‰ã€ç”šè‡³æç¤ºéƒ½æ²¡æœ‰è¿™å¯¹äºå¼€å‘æ¥è¯´å¤šç—›è‹¦ï¼Œæ›´å¯¹äºæˆ‘æƒ³è¦é˜…è¯»Cocoapodsæºç æ¥è¯´å¤šç—›è‹¦ï¼Œæ›´æ˜¯è®©æˆ‘æƒ³åˆ°äº†ï¼Ÿæ€ä¹ˆå¼€å‘gem å¦‚æœæˆ‘æœ‰ä¾èµ–ä¸‰æ–¹gemã€‚

é¦–å…ˆæˆ‘é€‰æ‹©æ˜¯VSCode Ideï¼Œä½œä¸ºå¼€å‘IDEã€‚å…¶æ¬¡ç»è¿‡ç ”ç©¶ï¼Œéœ€è¦å®‰è£…ä¸¤ä¸ªæ’ä»¶Ruby LSPã€ Ruby Solargraphã€‚å®‰è£…äº†è¿™ä¸¤ä¸ªæ’ä»¶æŒ‰ç†æ¥è¯´å°±èƒ½å®ç°æ–¹æ³•ã€ç±»è·³è½¬ã€è§£é‡Šã€‚ä½†æ˜¯å®é™…è¿œæ¯”æˆ‘æƒ³çš„å¤æ‚ã€‚å½“æˆ‘å®‰è£…äº†è¿™ä¸¤ä¸ªæ’ä»¶ä¹‹åï¼Œç”¨VS code æ‰“å¼€å·¥ç¨‹ï¼Œä¸€ç›´æŠ¥é”™ï¼Œé”™è¯¯åˆ™æ˜¯LSP æ— æ³•è¿æ¥æœåŠ¡ã€Solargraphå¯åŠ¨å¤±è´¥ç­‰ç­‰ï¼Œå¯¹åº”çš„VSCode å°±ä¸ä¼šæœ‰ä»»ä½•çš„è§£é‡Šã€æç¤ºã€è·³è½¬ã€‚

è§£å†³é—®é¢˜çš„è¿‡ç¨‹æ€»æ˜¯å¤æ‚çš„ã€è‰°éš¾çš„ã€‚æœ€åå‘ç°æˆ‘ä»¬éœ€è¦è¿›è¡Œä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š

1. éœ€è¦gem install solargraph

2. ä¿®æ”¹æ’ä»¶çš„è®¾ç½®ï¼Œå°†LSP çš„ ruby ç®¡ç†å·¥å…·æ”¹ä¸ºä½ ä½¿ç”¨çš„ï¼Œæˆ‘åˆ™æ˜¯rvm

3. å¢åŠ setting.json è®¾ç½®

   ```json
   {
       "solargraph.commandPath": "/Users/haoyh02/.rvm/rubies/ruby-3.2.1/bin/",
       "rubyLsp.rubyVersionManager": "rvm",
       "solargraph.useBundler": true,
       "solargraph.references": true,
       "solargraph.autoformat": true,
       "solargraph.formatting": true
   }
   ```

4. åœ¨Gemfileä¸­å¼•ç”¨ LSPï¼Œ Solargraph

   ```ruby
   gem 'ruby-lsp'
   gem 'solargraph'
   ```

5. åˆ æ‰Gemfile.lock, bundler install

6. é‡æ–°æ‰“å¼€vsCodeï¼Œ æ‰“å¼€å·¥ç¨‹å³å¯

### æ€»ç»“

å…œå…œè½¬è½¬ï¼Œä¸€ç›´åœ¨å­¦ä¹ çš„è·¯ä¸Šï¼Œä½†æ˜¯æ–°æ‰‹ä¹ˆï¼Œéš¾å…ä¼šè¸©å‘ï¼Œå½“ç„¶è¸©å‘ä¹Ÿæ²¡æœ‰æ›´å¥½çš„æ–¹å¼è§£å†³ï¼Œåªèƒ½è‡ªå·±æŸ¥èµ„æ–™ã€å°è¯•è§£å†³ã€‚ä½†æ˜¯è§£å†³äº†å°±ä¼šæ”¶è·æˆå°±æ„Ÿå“¦ã€‚

å¸Œæœ›ä»¥ä¸Šçš„ç»éªŒå¯ä»¥å¸®åŠ©æ­£åœ¨éœ€è¦äº†è§£Rubyï¼Œ æˆ–è€…å’Œæˆ‘ä¸€æ ·æƒ³è¦äº†è§£Cocoapodsåº•å±‚çš„æœ‹å‹ä¸€äº›å¸®åŠ©ã€‚

### ç›¸å…³æ–‡æ¡£

[Ruby-China](https://ruby-china.org/topics/27846)

[ä¸€æ–‡ææ¸…rakeã€Rakefileã€gemã€gemspecã€bundlerã€bundleã€Gemfileçš„å…³ç³»](https://cloud.tencent.com/developer/article/1596045)

[Rakefile](https://www.jtianling.com/use-rakefile-to-manage-project.html)

[Ruby æ•™ç¨‹](https://www.runoob.com/ruby/ruby-environment.html)

[rvm å®˜ç½‘](https://rvm.io/rvm/install)

[rake github](https://github.com/ruby/rake)





